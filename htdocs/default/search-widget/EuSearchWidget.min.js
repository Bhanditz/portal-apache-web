fnSearchWidget=function(f,A){var q=this;var m=false;var B=false;var C=false;var d=false;var v=false;if(typeof A!="undefined"){q.config=A;q.withResults=q.config.withResults=="true";q.theme=q.config.theme}var s=false;var y=A.rootUrl;var c=typeof A.apiUrl=="undefined"?"http://www.europeana.eu/api/v2/search.json?wskey=api2demo&profile=facets,params&v=2":A.apiUrl;var u=y+"/search.html";
//var t=rootUrl+(js.debug?"/themes/default/css/":"/themes/default/css-min/");
var t = 'http://styleguide.europeana.eu/search-widget/themes/default/css-min/';
var p=rootUrl+"/themes/default/js/eu/europeana/min/responsive-containers.js";
var o=6;
var w=[];
var x={};
q.load=function(){
    f.holdReady(true);
    /*
    var D=a+(q.config.lang?"&lang="+q.config.lang[0]:"");
    f.ajax({
        url:D,
        type:"GET",
        crossDomain:true,
        dataType:"script",
        contentType:"application/x-www-form-urlencoded;charset=UTF-8"
    });
    */
    searchWidget.init({
      "markup": '<div class="container"><script type="text/javascript">var rootUrl = "http://www.europeana.eu/portal";</script><div id="header" role="banner" class="row"><div class="phone-test"></div>  <div id="logo-and-search">                          <div id="query-full">                                   <form id="query-search" action="/search.html" method="get">     <table class="query-table" cellspacing="0" cellpadding="0">         <tr>                                <td class="query-cell">                 <input  type="text"                         name="query"                            role="search"                           id="query-input"                            maxlength="175"                         title="Search term(s)"                          value="fake"                            valueForBackButton="fake" />                </td>               <td class="submit-cell hide-cell-on-phones">                    <button class="icon-mag deans-button-1"                         type="submit"></button>             </td>           </tr>           <tr>                <td colspan="3" class="submit-cell show-cell-on-phones">                    <button class="icon-mag deans-button-1"                         type="submit"></button>             </td>           </tr>       </table>                        <input type="hidden" name="rows" id="rows" value="1" /> </form>                 </div>          </div></div>                <div class="row" id="content">                              <div class="twelve columns">                <div id="search-results">                              <div id="items">             <div class="li">        <div class="thumb-frame">                                               <a href="/record/xxx.html?start=1&query=fake&startPage=1&rows=1"        title=""        >       <img class="thumbnail" src="http://europeanastatic.eu/api/image?size=BRIEF_DOC&type=TEXT" alt="" data-type="text" />    </a>        </div>                                                              <a href="/record/xxx.html?start=1&query=fake&startPage=1&rows=1"  >         <div class="ellipsis">                                                                                      <span class="fixed"><span aria-hidden="true" class="icon-text"></span></span>           </div>      </a>            </div></div>            <div class="search-results-navigation notranslate">                    <div class="nav-bottom nav">          <div class="menu show-on-22">        <span>Results per page:</span>        <div class="eu-menu" aria-hidden="true"   title="Number of results shown on the page">          <span class="menu-label"></span>          <span class="icon-arrow-3 open-menu"></span>          <ul>                          <li class="item"> <a href="" class="6">6</a></li>                          <li class="item">  <a href="" class="12">12</a></li>                          <li class="item">    <a href="" class="18">18</a></li>                      </ul>        </div>      </div>        <div class="count">      <span>        Results&nbsp;        <span class="first-vis-record">1</span><span class="spaced">-</span><span class="last-vis-record">1</span>        <span class="of"> of </span>        <span class="of-bracket last-record"><fmt:formatNumber          value="1" type="NUMBER" maxFractionDigits="0"        /></span>      </span>    </div>    <div class="pagination">      <ul class="result-pagination">                <li class="nav-first">                      <a href="search.html?query=fake&rows=1&start=1" title="Click here for the first page of results">&lt;&lt; &nbsp;</a>                  </li>                <li class="nav-prev">                      <a href="search.html?query=fake&rows=1&start=0" title="Click here for previous page of results">&nbsp; &lt; &nbsp; </a>                  </li>        <li class="nav-numbers">          <form method="get" action="/search.html?" class="jump-to-page">                                    <input type="text" id="start-page" value="2"  disabled="disabled" style="border:none; color:black; background-color:white; text-align:right;"/>            <span class="of"> of </span>            <span class="of-bracket">              1            </span>            <input type="hidden" name="start" id="start" />            <input type="hidden" name="rows" id="rows" value="1" />            <input type="hidden" name="query" value="fake" />                                    <input type="hidden" id="max-rows" value="1" />            <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;" />          </form>        </li>                <li class="nav-next">                      <a href="search.html?query=fake&rows=1&start=2" title="Click here for next page of results"> &nbsp; &gt; &nbsp;</a>                  </li>                <li class="nav-last">                      <a href="search.html?query=fake&rows=1&start=1" title="Click here for last page of results" style="display:none;">&nbsp; &gt;&gt;</a>                  </li>      </ul>    </div>  </div>      </div>          </div>            </div>          </div>              <div class="row"><h4 id="no-results">Sorry, there are no results for this search. Please amend your search and try again</h4></div><div class="row"><a href="http://www.europeana.eu" target="_new"><span id="footer-logo"></span></a></div></div>'
    });


    return q
    };
q.init=function(D){
    f.getScript("http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js",function(){
        f.holdReady(false)});
        f(document).ready(function(){
            var G="search-widget-container";
            var F="."+G;m=f(F);if(!m.length){var E=document.getElementsByTagName("script");f.each(E,function(I,H){var K=f(H).attr("src");var J=new RegExp("^"+rootUrl+"(.*)EuSearchWidget[S]*");if(J.test(K)){f(H).after('<div class="'+G+'"></div>');m=f(F)}})}m.append('<div id="overlay"></div>');f("#overlay").hide();m.append(D.markup);m.find("#content").hide();m.find("#no-results").hide();B=m.find(".thumb-frame").parent();C=m.find("#filter-search li:nth-child(2)");s=m.find("#filter-search li:first");d=m.find("#search-filter li:first");g();n();z();w=[];f.each(f(".result-pagination"),function(I,H){w.push(pager=new EuPagination(f(H),{ajax:true,fns:{fnFirst:function(J){J.preventDefault();searchWidget.search(1)},fnPrevious:function(J){J.preventDefault();searchWidget.search(x.start-x.rows)},fnNext:function(J){J.preventDefault();searchWidget.search(x.start+x.rows)},fnLast:function(J){J.preventDefault();searchWidget.search(pager.getMaxStart())},fnSubmit:function(J){J=parseInt(J);var K=((J-1)*x.rows)+1;searchWidget.search(K);return false}}}))});m.css("overflow-y","auto");m.css("overflow-x","hidden");m.attr("data-squery","max-width:55em=max55em max-width:48em=mobile max-width:30em=max30em min-width:22em=min22em min-width:48em=desktop min-width:55em=min55em min-width:71em=min71em");if(js.debug){f.each(["html-sw","common-sw","header-sw","menu-main","responsive-grid-sw","eu-menu","ellipsis","europeana-font-icons-widget","europeana-font-face","search-sw","search-pagination-sw","sidebar-facets-sw","styling-sw"],function(I,H){f("head").append('<link rel="stylesheet" href="'+t+H+'.css" type="text/css" />')})}else{f("head").append('<link rel="stylesheet" href="'+t+'search-widget-all.css" type="text/css" />')}if(q.theme){m.removeClass("dark");f("body").removeClass("dark");m.addClass(""+q.theme);f("body").addClass(q.theme)}else{m.removeClass("dark");f("body").removeClass("dark")}f.getScript(p,function(){});if(A.query&&q.withResults){setTimeout(r,200)}})};var r=function(E,F){try{var D=h(E,F);if(typeof D!="undefined"&&D.length){if(q.withResults){if(c.indexOf("file")==0){getFake()}else{e();f.ajax({url:D,type:"GET",crossDomain:true,dataType:"script",contentType:"application/x-www-form-urlencoded;charset=UTF-8"})}}else{window.open(D,"_blank")}}else{q.q.addClass("error-border")}}catch(G){console.log(G)}};var h=function(F,G){var E=q.q.val();if(!E){E="*:*"}var D="";if(q.withResults){D=G?c+"&"+G:c+"&query="+E;D+="&callback=searchWidget.showRes";D+="&rows="+(q.resMenu1.getActive()?q.resMenu1.getActive():o);D+="&start="+(F?F:1);if(G){console.log("return the pre-set query");return D}}else{D=u+"?query="+E+"&bt=searchwidget2"}if(v){m.find("#refine-search-form > input").each(function(I,H){var J=f(H).attr("value");if(J.indexOf(":")>0){J=J.split(":")[0]+':"'+encodeURI(J.split(":")[1]+'"')}D+="&"+J})}if(q.config){if(q.config.qf){f.each(q.config.qf,function(I,H){H=H.replace(/[\{\}]/g,'"');D+="&qf=";var J=(H.indexOf(" ")>-1)?(H.split(":")[0]+":"+H.split(":")[1]+""):H;J=J.replace(/\&/g,"%26");D+=J})}}return D};var k=function(L){var D=m.find("#items");D.empty();var F=L.params.start?L.params.start:1;var M=q.q.val();if(f(L.items).length){m.find("#no-results").hide()}else{m.find("#no-results").show()}f(L.items).each(function(P,N){var Q=B.clone();Q.find("a").attr("href",y+"/record"+N.id+".html?start="+F+"&query="+M+"&bt=searchwidget2");Q.find("a .ellipsis").prepend(document.createTextNode(N.title));Q.find(".thumb-frame a").attr({title:N.title,target:"_new"});if(N.edmPreview){Q.find("img").attr("src",N.edmPreview[0])}if(Q.find(".ellipsis span span").length){Q.find(".ellipsis span span").attr("class","icon-"+N.type.toLowerCase())}Q.find(".thumbnail").attr("data-type",N.type.toLowerCase());if(Q.find(".thumbnail").attr("src").indexOf("europeanastatic")>-1){var O=Q.find(".thumbnail").attr("src");O=O.replace(/type=[a-zA-Z]+/,"type="+N.type.toUpperCase());Q.find(".thumbnail").attr("src",O)}D.append(Q)});x={records:L.totalResults,rows:L.params.rows,start:F};f.each(w,function(O,N){N.setData(L.totalResults,L.params.rows,F)});m.find(".count").hide();m.find(".of").html("/");if(L.items){f(".search-results-navigation").show()}else{f(".search-results-navigation").hide()}if(false){m.find(".first-vis-record").html(F);m.find(".last-vis-record").html(F-1+L.itemsCount);m.find(".last-record").html(L.totalResults)}if(v){var H=0;var E=m.find("#filter-search .ugc-li");var K=m.find("#filter-search input[type=checkbox]:checked").next("a");m.find("#filter-search>li:not(:first)").remove();f(L.facets).each(function(P,O){var R=C.clone();var N=R.find("ul");var Q=N.find("li:nth-child(1)");R.find("h3 a").html(b(O.name));N.empty();f.each(O.fields,function(S,U){var V=Q.clone();var T="qf="+O.name+":"+U.label;V.find("h4 a").attr({href:T,title:U.label});V.find("input").attr({name:"cb-"+H,id:"cb-"+H,value:T});V.find("label").html(U.label+" ("+U.count+")").attr({"for":"cb-"+H,title:U.label});N.append(V);H++});R.append(N);m.find("#filter-search").append(R)});var I=m.find("#refine-search-form");m.find("#filter-search  a label").add(m.find("#filter-search h4 input")).click(function(Q){var N=f(this);if(N.attr("for")){N=m.find("#filter-search #"+N.attr("for"))}N.prop("checked",!N.prop("checked"));Q.preventDefault();var O=N.next("a").attr("href");if(N.prop("checked")){f('<input type="hidden" name="qf" value="'+O+'"/>').appendTo(I)}else{var P=I.find('input[value="'+O+'"]');P.remove()}r()});m.find("#filter-search>li:not(:first)").each(function(O,N){N=f(N);var P=N.find("h3 a");l(N,function(){return P.parent().next("ul").first().find("a")},P)});var J={};f(K).each(function(P,N){var O=m.find('a[href="'+f(N).attr("href")+'"]');var Q=O.closest("ul").prev("h3").find("a");if(!J[Q]){J[Q]=true;Q.click()}O.prev().prop("checked",true)});if(m.find("#refinements").css("display")=="none"){m.find("#filter-search li:first h3 a").click()}if(L.breadCrumbs){var G=m.find("#search-filter");G.empty();f.each(L.breadCrumbs,function(Q,P){if(P.param=="qf"||P.param=="query"){P.href=P.href.replace(/&amp;/g,"&");P.href=P.href.replace(/\"/g,"");var O=(P.param=="query")?"":"qf="+P.href.split("&qf=")[1];var R=d.clone();R.find("a:first").attr("href",P.href);R.find("a:first").html(P.display);R.find("a:first").click(function(S){m.find("#refine-search-form input[type=hidden]").each(function(T,V){if(T>=Q){var U=m.find('input[value="'+f(this).val()+'"]');U.prop("checked",false);f(this).remove()}});r(q.resMenu1.getActive(),P.href);S.preventDefault();return});var N=R.find("a:nth-child(2)");N.attr("href","");N.click(function(T){try{var S=I.find('input[value="'+O+'"]');S.remove();m.find("#filter-search").find('input[value="'+O+'"]').prop("checked",false);r()}catch(T){console.log(T)}T.preventDefault()});G.append(R)}})}}m.find("#content").show();i();j()};var e=function(){m.find("#overlay").show();f(".search-widget-container").css("overflow-y","hidden")};var j=function(){m.find("#overlay").hide();f(".search-widget-container").css("overflow-y","auto")};var b=function(D){return(D.substr(0,1).toUpperCase()+D.substr(1).toLowerCase()).replace(/_/g," ")};var l=function(D,G,F){var E=new EuAccessibility(F,G);if(D.hasClass("ugc-li")){D.bind("keypress",E.keyPress)}else{D.Collapsible({headingSelector:"h3 a",bodySelector:"ul",keyHandler:E})}};var i=function(){var D=[];m.find(".ellipsis").each(function(G,E){var H=f(E).find(".fixed");var F=H.html();H.remove();D[D.length]=new Ellipsis(f(E),{fixed:'<span class="fixed">'+F+"</span>"},function(I){var J=f(E).parent().prev();J.css("border-style","solid solid none");J.css("border-width","1px 1px medium");I.css("visibility","visible")})});f(window).euRsz(function(){for(var E=0;E<D.length;E++){D[E].respond()}})};var g=function(){q.q=m.find("#query-input");q.q.blur(function(){f(this).parent().removeClass("glow")}).focus(function(){f(this).parent().addClass("glow")}).val(A.query?A.query:"");var F=m.find(".submit-cell");var D=m.find("button");var G=m.find(".menu-cell");var E=m.find("#search-menu");F.css("width",D.outerWidth(true)+"px");G.css("width",E.width()+"px");if(m.hasClass("dark")){D.css("border-left","solid 1px #333")}else{D.css("border-left","solid 1px #4C7ECF")}m.find("form").submit(function(){r();return false});m.find("#refine-search-form").unbind("submit").submit(function(){try{var I=f(this).find("#newKeyword");var H=I.val();I.val("");if(H){I.removeClass("error-border");f(this).append('<input type="hidden" name="qf" value="qf='+H+'"/>');r()}else{I.addClass("error-border")}}catch(J){console.log(J)}return false})};var n=function(){q.searchMenu=new EuMenu(m.find("#search-menu"),{fn_item:function(E){},fn_init:function(E){},fn_submit:function(F){var G=F.cmp.find(".item.active a").attr("class");var E=m.find("#query-input");E.val((typeof G=="undefined"?"":G)+E.val())}});q.searchMenu.init();var D={fn_init:function(E){E.setActive("6")},fn_item:function(E,F){r()}};q.resMenu1=new EuMenu(m.find(".nav-top .eu-menu"),D);q.resMenu2=new EuMenu(m.find(".nav-bottom .eu-menu"),D);q.resMenu1.init();q.resMenu2.init();f(m).click(function(){m.find(".eu-menu").removeClass("active")})};var z=function(){var D=m.find("#filter-search>li:first");var E=D.find("h3 a");l(D,function(){return E.parent().next("form").find('input[type!="hidden"]')},E);m.find("#refine-search-form > input").remove()};return{init:function(D){q.init(D)},load:function(){q.load()},search:function(D){r(D)},showRes:function(D){k(D)},setWithResults:function(D){q.withResults=D;if(!D){m.find("#content").hide()}},setTheme:function(D){if(q.theme){m.removeClass(q.theme);f("body    ").removeClass(q.theme)}if(D){q.theme=D;m.addClass(D)}else{m.removeClass("dark")}}}};var theParams=function(){var a=document.getElementsByTagName("script");var c=false;for(var d=0;d<a.length;d++){if(a[d].src.indexOf("EuSearchWidget")>-1){c=a[d]}}if(!c){if($("#widget-url-ref").length>0&&$("#widget-url-ref").val().length>0){c={src:$("#widget-url-ref").val()}}else{return{}}}rootJsUrl=c.src.split("EuSearchWidget")[0];rootUrl=rootJsUrl.split("/themes")[0];var e=c.src.replace(/^[^\?]+\??/,"");function b(j){var k=new Object();if(!j){return k}var f=j.split("&");for(var h=0;h<f.length;h++){var m=f[h].split("=");if(!m||m.length!=2){continue}var g=unescape(decodeURIComponent(m[0]));var l=unescape(decodeURIComponent(m[1]));if(!k[g]){k[g]=new Array()}k[g].push(l)}k.rootUrl=[rootUrl];return k}return b(e)}();var searchWidget;var rootUrl;var rootJsUrl;var withJQuery=function(a){a(document).ready(function(d){if(typeof window.$=="undefined"){window.$=jQuery}var c=["utils.js","EuAccessibility.js","EuMenu.js","ellipsis.js","collapsible_widget.js","collapsible.js","EuPagination.js",];function b(e){if(c.length>e){d.ajax({url:rootJsUrl+c[e],dataType:"script",success:function(){b(e+1)},contentType:"application/x-www-form-urlencoded;charset=UTF-8"})}else{searchWidget=fnSearchWidget(d,theParams);searchWidget.load()}}b(0)})};if(typeof jQuery=="undefined"){var jq=document.createElement("script");jq.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js");jq.setAttribute("type","text/javascript");if("onload" in document||"addEventListener" in window){jq.onload=function(){withJQuery(jQuery)}}else{if("onreadystatechange" in document){jq.onreadystatechange=function(){if(jq.readyState==="loaded"||jq.readyState==="complete"){withJQuery(jQuery)}}}}document.getElementsByTagName("body")[0].appendChild(jq)}else{withJQuery(jQuery)};